{"version":3,"sources":["cart.js"],"names":["cartContent","document","querySelector","cartBody","cartEmpty","cartDelete","cartCircle","itemsCount","window","addEventListener","event","target","hasAttribute","card","closest","cartButton","classList","add","innerText","productInfo","id","dataset","imgSrc","getAttribute","title","price","createCartItem","arr","localStorage","getItem","JSON","parse","productID","productImg","productTitle","productPrice","push","setItem","stringify","console","log","changeCartCircle","toggleCartStatus","calculateTotalPrice","action","remove","productArr","length","forEach","_ref","cartItemHTML","concat","insertAdjacentHTML","children","cartItems","querySelectorAll","totalPrice","item","priceEl","parseInt","textContent","cartTotalAmount","innerHTML","clear"],"mappings":"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","file":"cart.5e0824ae.js","sourceRoot":"..\\src","sourcesContent":["const cartContent = document.querySelector('.cart__content');\r\nconst cartBody = document.querySelector('.cart__body');\r\nconst cartEmpty = document.querySelector('.cart__empty');\r\nconst cartDelete = document.querySelector('.cart__delete');\r\nconst cartCircle = document.querySelector('.cart-circle');\r\nlet itemsCount = 0;\r\n// Отслеживаем клик по кнопке \"Добавить в корзину\"\r\nwindow.addEventListener('click', (event) => {\r\n\r\n    if (event.target.hasAttribute('data-cart')){\r\n        const card = event.target.closest('.goods__item');\r\n        const cartButton = event.target.closest('.goods__item-button');\r\n        cartButton.classList.add('active');\r\n        cartButton.innerText = 'Добавлено';\r\n// Собираем данные о карточке товара\r\n        const productInfo = {\r\n            id: card.dataset.id,\r\n            imgSrc: card.querySelector('.goods__item-image').getAttribute('src'),\r\n            title: card.querySelector('.goods__item-text').innerText,\r\n            price: card.querySelector('.goods__item-discount').innerText,\r\n        }\r\n        \r\n        \r\n// Отрисовывем товар, по которому кликнули, в корзине. \r\n        createCartItem(productInfo);\r\n      \r\n      let arr = [];\r\n      if (localStorage.getItem('product'))\r\n      arr = JSON.parse(localStorage.getItem('product'));\r\n        \r\n      const productID = productInfo.id,\r\n      productImg = productInfo.imgSrc,\r\n      productTitle = productInfo.title,\r\n      productPrice = productInfo.price;\r\n      arr.push({productID, productImg, productTitle, productPrice});\r\n      localStorage.setItem('product', JSON.stringify(arr));\r\n      itemsCount++;\r\n      console.log(itemsCount);\r\n      changeCartCircle();\r\n      toggleCartStatus();\r\n      calculateTotalPrice();\r\n    }\r\n\r\n// Удаляем товар из корзины\r\n    if(event.target.closest('.cart__body') && event.target.dataset.action === \"delete\"){\r\n      event.target.closest(\".cart__item\").remove();\r\n      itemsCount--;\r\n      changeCartCircle();\r\n      toggleCartStatus();\r\n      calculateTotalPrice();\r\n    } \r\n  })\r\n\r\n\r\n  if(localStorage.getItem('product')){\r\n    productArr = JSON.parse(localStorage.getItem('product'));\r\n    itemsCount = productArr.length;\r\n    productArr.forEach(({productID, productImg, productTitle, productPrice}) => {\r\n      const cartItemHTML = `<article class=\"cart__item\">\r\n      <div class=\"cart__item-image\">\r\n      <img src=${productImg} alt=\"Goods-image\">\r\n      </div>\r\n      <div class=\"cart__item-description\">\r\n        <p class=\"item__name\">\r\n          ${productTitle}\r\n        </p>\r\n        <span class=\"item__article\">Артикул: <span>123654785</span></span>\r\n        <button class=\"item__delete\" data-action = \"delete\">Удалить</button>\r\n      </div>\r\n      <div class=\"item__amount\">\r\n        ${productPrice}\r\n      </div>\r\n      <div class=\"item__quantity\">\r\n        1 шт\r\n      </div>\r\n      <div class=\"item__net-amount\">\r\n      ${productPrice}\r\n      </div>\r\n    </article>`;\r\n      \r\n    cartBody.insertAdjacentHTML('beforeend', cartItemHTML);\r\n    });\r\n\r\n    calculateTotalPrice();\r\n    toggleCartStatus();\r\n    changeCartCircle();\r\n   }\r\n\r\n// Отображаем или скрываем поле \"Корзина пуста\"\r\n\r\nfunction toggleCartStatus() {\r\n  if(cartBody.children.length > 0){\r\n      cartEmpty.classList.add('none')\r\n    } else {\r\n      cartEmpty.classList.remove('none')\r\n    }\r\n}\r\n\r\n// Подсчет итоговой стоимости товаров\r\n\r\nfunction calculateTotalPrice(){\r\n  const cartItems = document.querySelectorAll('.cart__item');\r\n  let totalPrice = 0; \r\n\r\n  cartItems.forEach(function (item) {\r\n    const priceEl = item.querySelector('.item__amount');\r\n    totalPrice += parseInt(priceEl.textContent);\r\n  })\r\n  const cartTotalAmount = document.querySelector('.cart__amount');\r\n\r\n  cartTotalAmount.innerHTML = totalPrice + ' ₽';\r\n\r\n}\r\n\r\n// Удаляем из корзины всё сразу\r\n\r\ncartDelete.addEventListener('click', () => {\r\n  cartBody.innerHTML = '';\r\n  itemsCount = 0;\r\n  toggleCartStatus();\r\n  calculateTotalPrice();\r\n  cartCircle.innerHTML = '0';\r\n  cartCircle.classList.remove('active');\r\n  localStorage.clear();\r\n})\r\n\r\n\r\n// - к количеству товаров в корзине\r\nfunction changeCartCircle(){\r\n  cartCircle.innerHTML = itemsCount;\r\n  if(itemsCount === 0){\r\n    cartCircle.classList.remove('active');\r\n  } else {\r\n    cartCircle.classList.add('active');\r\n  }\r\n}\r\n\r\nfunction createCartItem(item){\r\n  const cartItemHTML = `<article class=\"cart__item\">\r\n  <div class=\"cart__item-image\">\r\n  <img src=${item.imgSrc} alt=\"Goods-image\">\r\n  </div>\r\n  <div class=\"cart__item-description\">\r\n    <p class=\"item__name\">\r\n      ${item.title}\r\n    </p>\r\n    <span class=\"item__article\">Артикул: <span>123654785</span></span>\r\n    <button class=\"item__delete\" data-action = \"delete\">Удалить</button>\r\n  </div>\r\n  <div class=\"item__amount\">\r\n    ${item.price}\r\n  </div>\r\n  <div class=\"item__quantity\">\r\n    1 шт\r\n  </div>\r\n  <div class=\"item__net-amount\">\r\n  ${item.price}\r\n  </div>\r\n</article>`;\r\n  \r\ncartBody.insertAdjacentHTML('beforeend', cartItemHTML);\r\nreturn cartItemHTML;\r\n}\r\n"]}